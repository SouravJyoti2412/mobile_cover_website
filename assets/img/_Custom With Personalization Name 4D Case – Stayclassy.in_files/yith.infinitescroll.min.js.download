!function(g,m,S){"use strict";g.yit_infinitescroll=function(t){var s,a,c=g.extend({nextSelector:"",navSelector:"",itemSelector:"",contentSelector:"",eventType:"scroll",presetLoader:"",customLoader:"",buttonLabel:"",buttonClass:"",loadEffect:"fadeIn"},t),f="undefined"!=typeof yith_infs_script&&yith_infs_script.shop,i="undefined"!=typeof yith_infs_script&&yith_infs_script.block_loader,h=!1,d=!1,e=!1,t=!1,u=g(c.nextSelector).attr("href"),p=[],y=[],v=function(t,e){m.location.pathname!=t&&(m.history.replaceState({url:""+t},"Title",t),e&&(S.title=e),g(S).trigger("yith_infs_url_changed",[t,e]))};"pagination"!=c.eventType&&g(c.navSelector).hide(),f&&(a=g(c.itemSelector).first().nextUntil(".first",c.itemSelector).length+1);var o,l=function(){e&&g(c.navSelector).last().after('<div class="yith-infs-loader">'+e+"</div>"),h=!0,u=(u=decodeURIComponent(u)).replace(/^(?:\/\/|[^\/]+)*\//,"/"),g.ajax({url:u,dataType:"html",cache:yith_infs_script.use_cache,success:function(t){s=g(c.itemSelector).last();var e=g(t),n=e.find(c.contentSelector),i=e.find(c.itemSelector),o=e.find(c.navSelector),l=e.find(c.nextSelector),r=u,t=m.scrollY;l.length?u=l.attr("href"):(d=!0,g(S).trigger("yith-infs-scroll-finished")),f&&!s.hasClass("last")&&"pagination"!=c.eventType&&_(s,a,i),g(c.navSelector).replaceWith(o),"pagination"!=c.eventType?(s.after(i),g(c.navSelector).hide()):(g(c.contentSelector).replaceWith(n),g(m).scrollTop(g(c.contentSelector).offset().top)),g(".yith-infs-loader").remove(),g(S).trigger("yith_infs_adding_elem",[i,r]),i.addClass("yith-infs-animated"),i.addClass(c.loadEffect),yith_infs_script.change_url&&(e=e.filter("title").length?e.filter("title").text():"","pagination"!=c.eventType&&(p.length||p.push([m.location.href,S.title]),p.push([r,e]),y.push(s)),"scroll"!=c.eventType&&v(r,e),"button"===c.eventType&&g("html, body").animate({scrollTop:t},"slow")),setTimeout(function(){h=!1,i.removeClass("yith-infs-animated"),i.removeClass(c.loadEffect),g(S).trigger("yith_infs_added_elem",[i,r])},1e3)}})},_=function(t,e,n){var i=e-t.prevUntil(".last",c.itemSelector).length,o=0;n.each(function(){var t=g(this);o++,t.removeClass("first"),t.removeClass("last"),(o-i)%e==0?t.addClass("first"):(o-(i-1))%e==0&&t.addClass("last")})};"scroll"==c.eventType?(e='<img src="'+(""==c.customLoader?c.presetLoader:c.customLoader)+'">',g(m).on("scroll touchstart",function(){g(this).trigger("yith_infs_start")}),g(m).on("yith_infs_start",function(){var t=g(this),e=g(c.itemSelector).last(),n=null!=yith_infs_script.elem_height?yith_infs_script.elem_height:2*e.height();void 0!==e&&!h&&!d&&t.scrollTop()+t.height()>=e.offset().top-n&&l()})):"button"==c.eventType?(t='<div class="yith-infs-button-wrapper"><button id="yith-infs-button" class="'+c.buttonClass+'">'+c.buttonLabel+"</button></div>",g(c.navSelector).last().after(t),g(S).on("yith-infs-scroll-finished",function(){g(".yith-infs-button-wrapper").remove()}),g("#yith-infs-button").off("click").on("click",function(){var n=g(this);h||(i&&n.block({message:null,overlayCSS:{background:"#fff url("+i+") no-repeat center",opacity:.5,cursor:"none"}}),l()),g(S).on("yith_infs_adding_elem",function(t,e){i&&n.unblock(),g("html, body").animate({scrollTop:g(e).first().offset().top-100},1)})})):"pagination"==c.eventType&&g(S).off("click",c.navSelector+" a").on("click",c.navSelector+" a",function(t){t.preventDefault(),u=g(this).attr("href"),i&&g(c.navSelector).block({message:null,overlayCSS:{background:"#fff url("+i+") no-repeat center",opacity:.5,cursor:"none"}}),l()}),g(m).on("scroll touchstart",function(t){var e,n=g(m),i=n.scrollTop()+n.height();void 0!==s&&p.length&&(e=y.indexOf(s),n=s.offset().top+s.height(),i<o?i<=n&&(s=y[e&&e-1],v(p[e][0],p[e][1])):n+250<i&&(e+1<y.length&&(s=y[e+1]),v(p[e+1][0],p[e+1][1])),o=i)})}}(jQuery,window,document);